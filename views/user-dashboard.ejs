<% include ../includes/navbar.ejs %>
<div class="container mt-4">
  <h1>User Dashboard</h1>
  <div id="profile-section" class="mb-4">
    <!-- profile info will be filled by JS -->
  </div>

  <div id="complaint-form-section" class="mb-5">
    <h4>Submit a Complaint</h4>
    <form id="complaintForm" enctype="multipart/form-data">
      <div class="mb-3">
        <label for="title" class="form-label">Title</label>
        <input type="text" class="form-control" id="title" required>
      </div>
      <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea class="form-control" id="description" rows="3" required></textarea>
      </div>
      <div class="mb-3">
        <label for="category" class="form-label">Category (AI will suggest)</label>
        <input type="text" class="form-control" id="category">
      </div>
      <div class="mb-3">
        <label for="image" class="form-label">Upload Image</label>
        <input class="form-control" type="file" id="image">
      </div>
      <div class="mb-3">
        <label class="form-label">Pick location</label>
        <div id="map" style="height: 300px;"></div>
        <input type="hidden" id="location">
      </div>
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>

    <div id="ai-results" class="mt-3" style="display:none;">
      <h5>AI Results</h5>
      <p>Category: <span id="ai-category"></span></p>
      <p>Duplicate similarity: <span id="ai-duplicate"></span>%</p>
      <p>Priority score: <span id="ai-priority"></span></p>
      <p>Estimated deadline: <span id="ai-deadline"></span></p>
    </div>
  </div>

  <div id="complaints-list-section">
    <h4>Your Complaints</h4>
    <table class="table table-striped" id="complaintsTable">
      <thead>
        <tr>
          <th>Title</th>
          <th>Status</th>
          <th>Priority</th>
          <th>Duplicate</th>
          <th>Dept.</th>
          <th>Deadline</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places"></script>
<script src="/js/user-dashboard.js"></script>